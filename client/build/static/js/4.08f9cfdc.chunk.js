(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[4],{109:function(e,t,c){"use strict";c.r(t);var a=c(71),n=c(5),r=c(0),s=c.n(r),i=c(3),o=c(49),l=c.n(o),u=c(1),j=c(50),d=c(52),b=c(54),p=c(21),h=c(103),f=c(104),m=c(105),x=c(111),O=c(106),v=c(107),g=c(46),k=c(55),w=c.n(k),N=c(56),y=c.n(N),_=c(6),z="http://ec2-52-91-87-52.compute-1.amazonaws.com:5005",B=function(){return function(){var e=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t({type:_.c});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},S=function(){return function(){var e=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t({type:_.d});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},C=c.p+"static/media/crown.467069d5.svg",L=c.p+"static/media/sword.8149fb4a.svg",T=c.p+"static/media/axes.442d342d.svg",I=c(101),P=c.p+"static/media/win.41c3b97f.jpg",H=c.p+"static/media/loss.b2b98a9b.jpg",M=c.p+"static/media/bg.1d3f370f.jpg";function D(){var e=Object(b.a)(["\n  position: absolute;\n  top: calc(50% - 30px);\n  left: calc(50% - 30px);\n"]);return D=function(){return e},e}var F=Object(g.css)(D()),J={backgroundImage:"url(".concat(M,")"),backgroundSize:"cover",backgroundPositionX:"center",paddingBottom:15},E={backgroundImage:"url(".concat(P,")"),backgroundSize:"cover"},R={backgroundImage:"url(".concat(H,")"),backgroundSize:"cover"},X=function(e){return(e=e.filter((function(e){return!!e}))).join(",")},Y=Object(p.b)((function(e){return{loading:e.search.loadingBattle,battle_id:e.search.battle_id,selectedBattle:e.search.selectedBattle}}),{getSearchedBattle:function(e){return function(){var t=Object(j.a)(l.a.mark((function t(c){var a,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={headers:{"Content-Type":"application/json"}},t.prev=1,c(S()),t.next=5,y.a.get("".concat(z,"/").concat(e),a);case 5:n=t.sent,c({type:_.i,payload:n.data.response}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log("search error",t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.battle_id,c=e.selectedBattle,a=e.loading,s=e.getSearchedBattle,i=Object(r.useState)({name:"",year:"",battle_number:0,attacker_king:"",defender_king:"",attacker_1:"",attacker_2:"",attacker_3:"",attacker_4:"",defender_1:"",defender_2:"",defender_3:"",defender_4:"",attacker_outcome:"",battle_type:"",major_death:0,major_capture:0,attacker_size:0,defender_size:0,attacker_commander:"",defender_commander:"",summer:0,location:"",region:"",note:""}),o=Object(d.a)(i,2),b=o[0],p=o[1],g=Object(r.useState)(0),k=Object(d.a)(g,2),N=k[0],y=k[1],_=Object(r.useState)(!1),z=Object(d.a)(_,2),B=z[0],S=z[1],P=Object(r.useState)(null),H=Object(d.a)(P,2),M=H[0],D=H[1],Y=Object(r.useState)(null),q=Object(d.a)(Y,2),A=q[0],G=q[1],K=b.name,Q=b.year,U=b.battle_number,V=b.attacker_king,W=b.defender_king,Z=b.attacker_1,$=b.attacker_2,ee=b.attacker_3,te=b.attacker_4,ce=b.defender_1,ae=b.defender_2,ne=b.defender_3,re=b.defender_4,se=b.attacker_outcome,ie=b.battle_type,oe=(b.major_death,b.major_capture,b.attacker_size),le=b.defender_size,ue=b.attacker_commander,je=b.defender_commander,de=b.summer,be=b.location,pe=b.region,he=b.note,fe=function(){S(!1),y(0),M&&clearInterval(M)};return Object(r.useMemo)((function(){fe(),G(null),t&&s(t)}),[s,t]),Object(r.useEffect)((function(){var e=!0;function t(){return(t=Object(j.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e&&c&&p(Object(u.a)({},c));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){return e=!1}}),[c]),Object(n.jsx)("section",{className:"sptb p-2",children:Object(n.jsx)(h.a,{children:t?Object(n.jsx)(f.a,{children:Object(n.jsx)(m.a,{md:10,className:"m-auto",children:Object(n.jsx)("div",{className:"p-2",children:Object(n.jsxs)("div",{style:Object(u.a)({minHeight:697},J),className:"border shadow-lg bg-vs",children:[a&&Object(n.jsx)("div",{className:"custom_overlay",children:Object(n.jsx)(w.a,{css:F,size:60,loading:!0})}),B&&Object(n.jsx)("div",{className:"fixed-bar d-flex align-items-center justify-content-center",children:Object(n.jsx)(x.a,{animated:!0,now:N,min:0,max:100,className:"w-lg-60 w-md-60"})}),Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)(f.a,{className:"d-flex justify-content-center mb-2",children:Object(n.jsx)("div",{children:Object(n.jsx)("span",{className:"battle-name-label shadow",children:"".concat(U,". ").concat(K)})})}),Object(n.jsx)(f.a,{className:"d-flex justify-content-center mb-2",children:Object(n.jsxs)("div",{className:"battle-history text-white",children:[Object(n.jsx)("div",{children:"Location: ".concat(be)}),Object(n.jsx)("div",{children:"Region: ".concat(pe)}),Object(n.jsx)("div",{children:"Year: ".concat(Q," ")})]})}),Object(n.jsxs)(f.a,{children:[Object(n.jsx)(m.a,{md:6,xs:12,className:"p-4",children:Object(n.jsxs)("div",{className:"border battle-card left",style:"win"===se?E:R,children:[!!A&&("attacker"===A?Object(n.jsx)("div",{className:"text outcome",children:Object(n.jsx)(I.a,{color:"#ffc107",size:"32px"})}):Object(n.jsx)("div",{className:"text outcome",children:Object(n.jsx)(I.b,{color:"#2684ff",size:"32px"})})),Object(n.jsxs)("div",{className:"text",children:[Object(n.jsx)(O.a,{src:C,width:28,height:28,className:"mr-2"}),Object(n.jsx)("span",{children:V})]}),Object(n.jsxs)("div",{className:"text",children:[Object(n.jsx)(O.a,{src:L,width:28,height:28,className:"mr-2"}),Object(n.jsx)("span",{children:oe||0})]}),Object(n.jsxs)("div",{className:"text",children:[Object(n.jsx)(I.c,{size:"28px",className:"mr-2",color:"#ffc107"}),Object(n.jsx)("span",{children:ue})]}),Object(n.jsxs)("div",{className:"text",children:[Object(n.jsx)(O.a,{src:T,width:28,height:28,className:"mr-2"}),Object(n.jsx)("span",{children:X([Z,$,ee,te])})]}),Object(n.jsxs)("div",{className:"text",children:[Object(n.jsx)(I.f,{size:"28px",className:"mr-2",color:"#ffc107"}),Object(n.jsx)("span",{children:ie})]}),Object(n.jsx)("div",{className:"text",children:!!de&&(de?Object(n.jsx)(I.e,{size:"28px",className:"mr-2",color:"#ffc107"}):Object(n.jsx)(I.d,{size:"28px",className:"mr-2",color:"#fff"}))})]})}),Object(n.jsx)(m.a,{md:6,xs:12,className:"p-4",children:Object(n.jsxs)("div",{className:"border battle-card right",style:"win"===se?R:E,children:[!!A&&("attacker"===A?Object(n.jsx)("div",{className:"text outcome",children:Object(n.jsx)(I.b,{color:"#2684ff",size:"32px"})}):Object(n.jsx)("div",{className:"text outcome",children:Object(n.jsx)(I.a,{color:"#ffc107",size:"32px"})})),Object(n.jsxs)("div",{className:"text skew-right",children:[Object(n.jsx)(O.a,{src:C,width:28,height:28,className:"mr-2"}),Object(n.jsx)("span",{children:W})]}),Object(n.jsxs)("div",{className:"text skew-right",children:[Object(n.jsx)(O.a,{src:L,width:28,height:28,className:"mr-2"}),Object(n.jsx)("span",{children:le||0})]}),Object(n.jsxs)("div",{className:"text skew-right",children:[Object(n.jsx)(I.c,{size:"28px",className:"mr-2",color:"#ffc107"}),Object(n.jsx)("span",{children:je})]}),Object(n.jsxs)("div",{className:"text skew-right",children:[Object(n.jsx)(O.a,{src:T,width:28,height:28,className:"mr-2"}),Object(n.jsx)("span",{children:X([ce,ae,ne,re])})]}),Object(n.jsxs)("div",{className:"text",children:[Object(n.jsx)(I.f,{size:"28px",className:"mr-2",color:"#ffc107"}),Object(n.jsx)("span",{children:ie})]}),Object(n.jsx)("div",{className:"text",children:!!de&&(de?Object(n.jsx)(I.e,{size:"28px",className:"mr-2",color:"#ffc107"}):Object(n.jsx)(I.d,{size:"28px",className:"mr-2",color:"#fff"}))})]})})]}),!!he&&Object(n.jsx)(f.a,{className:"mt-2 mb-2",children:Object(n.jsx)(m.a,{children:Object(n.jsx)("span",{className:"text-white",children:he})})}),!!se&&Object(n.jsx)(f.a,{children:Object(n.jsx)(m.a,{md:4,className:"m-auto",children:Object(n.jsx)(v.a,{variant:"outline-info",className:"w-100",onClick:function(){S(!0),function(){var e=0;D(setInterval((function(){y(e+=10),e>=100&&(G("win"===se?"attacker":"defender"),fe())}),1e3))}()},title:"Start Fight",children:"Fight"})})})]})]})})})}):Object(n.jsx)(f.a,{children:Object(n.jsx)(m.a,{md:10,className:"m-auto",children:Object(n.jsx)("h3",{children:"Please Search for a battle..."})})})})})})),q="http://ec2-52-91-87-52.compute-1.amazonaws.com:5005",A=function(){return function(){var e=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t({type:_.b});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},G=function(){return function(){var e=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t({type:_.a});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};function K(){var e=Object(b.a)(["\n  position: absolute;\n  top: calc(50% - 30px);\n  left: calc(50% - 30px);\n"]);return K=function(){return e},e}var Q=Object(g.css)(K()),U=[{path:"/",exact:!0,name:"Home",component:Y},{path:"/battles",exact:!0,name:"Battles",component:Object(p.b)((function(e){return{loading:e.battles.loadingList,loadingCount:e.battles.loadingCount,count:e.battles.count,list:e.battles.list}}),{getList:function(){return function(){var e=Object(j.a)(l.a.mark((function e(t){var c,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={headers:{"Content-Type":"application/json"}},e.prev=1,t(A()),e.next=5,y.a.get("".concat(q,"/list"),c);case 5:a=e.sent,t({type:_.h,payload:a.data.response}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log("list error",e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},getCount:function(){return function(){var e=Object(j.a)(l.a.mark((function e(t){var c,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={headers:{"Content-Type":"application/json"}},e.prev=1,t(G()),e.next=5,y.a.get("".concat(q,"/count"),c);case 5:a=e.sent,t({type:_.g,payload:a.data.response}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log("count error",e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},resetComponent:function(){return function(){var e=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t({type:_.e});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(Object(i.f)((function(e){var t=e.list,c=e.loading,a=e.loadingCount,s=e.count,i=e.getCount,o=e.getList,l=e.resetComponent,u=Object(r.useState)(!0),j=Object(d.a)(u,2),b=j[0],p=j[1];return Object(r.useMemo)((function(){b&&(l(),p(!1)),i(),o()}),[l,p,i,o]),Object(n.jsxs)("section",{className:"sptb p-3",children:[(c||a)&&Object(n.jsx)("div",{className:"custom_overlay",children:Object(n.jsx)(w.a,{css:Q,size:60,loading:!0})}),Object(n.jsx)(f.a,{children:Object(n.jsx)(m.a,{children:Object(n.jsx)("h3",{children:"Total Battles Occurred: ".concat(s)})})}),Object(n.jsx)(f.a,{children:Object(n.jsxs)(m.a,{children:[Object(n.jsx)("h3",{children:"Battle Places"}),Object(n.jsx)("ul",{children:t.map((function(e,t){return Object(n.jsx)("li",{children:e},t)}))})]})})]})})))}],V=function(e){var t=e.routes;return Object(n.jsx)(r.Suspense,{fallback:"loading...",children:Object(n.jsx)(i.c,{children:t.map((function(e,t){try{return e.component&&Object(n.jsx)(i.a,{path:e.path,exact:e.exact,name:e.name,render:function(t){return Object(n.jsx)(e.component,Object(u.a)({},t))}},t)}catch(c){console.log("err",c)}}))})})},W=s.a.memo(V),Z=c(108),$=c(110),ee=c.p+"static/media/logo.3d2f4a32.jpg",te=c(100),ce=Object(p.b)((function(e){return{loading:e.search.loadingList,sortingParams:e.search.sortingParams}}),{searchBattle:function(e){return function(){var t=Object(j.a)(l.a.mark((function t(c){var a,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={headers:{"Content-Type":"application/json"}},t.prev=1,a.params=e,c(B()),t.next=6,y.a.get("".concat(z,"/search"),a);case 6:return n=t.sent,c({type:_.l,payload:e}),c({type:_.j,payload:n.data.response}),t.abrupt("return",n);case 12:t.prev=12,t.t0=t.catch(1),console.log("search error",t.t0);case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}()},updateSearchedBattleID:function(e){return function(){var t=Object(j.a)(l.a.mark((function t(c){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e&&c({type:_.k,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},resetComponent:function(){return function(){var e=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t({type:_.f});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t,c,a=e.loading,s=e.sortingParams,i=e.searchBattle,o=e.updateSearchedBattleID,l=e.resetComponent,j=Object(r.useState)({limit:40,king:"",location:"",type:""}),b=Object(d.a)(j,2),p=b[0],h=(b[1],Object(r.useState)(!0)),f=Object(d.a)(h,2),x=f[0],O=f[1],v=function(e){var t=Object(u.a)(Object(u.a)({},s),{},{location:e});return i(t).then((function(e){if(e.data.status)return e.data.response.map((function(e){return{value:e._id,label:e.name}}))}))};return Object(r.useMemo)((function(){x&&(l(),O(!1)),i(p)}),[l,O,i,p]),Object(n.jsx)(m.a,{md:8,lg:6,children:Object(n.jsx)(te.a,{placeholder:"Search Battles...",cacheOptions:!0,isLoading:a,defaultOptions:!0,onChange:(c="searchBattle",function(e){var t=[];switch(e&&(e.length?t=e.map((function(e){return e.value})):e.value&&(t=e.value)),c){case"searchBattle":o(t)}}),loadOptions:function(e){return function(e,c){return function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:750;return clearTimeout(t),new Promise((function(n){t=setTimeout((function(){n(e(c))}),a)}))}}(v,e)()}})})})),ae=function(){return Object(n.jsxs)(Z.a,{bg:"light",fixed:"top",expand:"lg",children:[Object(n.jsx)(Z.a.Brand,{href:"/",children:Object(n.jsx)(O.a,{src:ee,style:{height:60,width:60,padding:10},alt:"game of thrones"})}),Object(n.jsx)(Z.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(n.jsxs)(Z.a.Collapse,{id:"basic-navbar-nav",children:[Object(n.jsxs)($.a,{className:"mr-auto",children:[Object(n.jsx)($.a.Link,{href:"/",children:"Home"}),Object(n.jsx)($.a.Link,{href:"/battles",children:"Battles"})]}),Object(n.jsx)(ce,{})]})]})};t.default=Object(i.f)((function(e){return Object(a.a)(e),Object(n.jsxs)(h.a,{children:[Object(n.jsx)(ae,{}),Object(n.jsx)(W,{routes:U})]})}))}}]);
//# sourceMappingURL=4.08f9cfdc.chunk.js.map